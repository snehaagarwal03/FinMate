{% extends 'layout.html' %}

{% block title %}Budgeting - FinMate{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/budgeting.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
{% endblock %}

{% block content %}
<div class="budgeting-container">
  <!-- Header -->
  <header class="header">
    <div class="header-container">
      <div class="header-left">
        <button id="navbar-toggle" class="navbar-toggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="logo">
          <img src="{{ url_for('static', filename='assets/logo.svg') }}" alt="FinMate Logo">
          <span class="logo-text">FinMate</span>
        </div>
      </div>
      <div class="header-right">
        <div class="profile-dropdown">
          <button id="profile-toggle" class="profile-toggle">
            <i class="fas fa-user"></i>
          </button>
          <div class="profile-menu">
            <div class="profile-menu-header">
              <div class="profile-menu-name">User Name</div>
              <div class="profile-menu-email">user@example.com</div>
            </div>
            <ul class="profile-menu-items">
              <li class="profile-menu-item">
                <a href="/dashboard" class="profile-menu-link">
                  <i class="fas fa-tachometer-alt"></i>
                  Dashboard
                </a>
              </li>
              <li class="profile-menu-item">
                <a href="/profile" class="profile-menu-link">
                  <i class="fas fa-user"></i>
                  Profile
                </a>
              </li>
              <li class="profile-menu-divider"></li>
              <li class="profile-menu-item">
                <a href="#" class="profile-menu-link logout-btn">
                  <i class="fas fa-sign-out-alt"></i>
                  Logout
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="budgeting-content">
    <!-- Side Navigation -->
    <nav class="sidenav">
      <ul class="sidenav-menu">
        <li class="sidenav-item">
          <a href="/dashboard" class="sidenav-link">
            <i class="fas fa-tachometer-alt"></i>
            Dashboard
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/transactions" class="sidenav-link">
            <i class="fas fa-exchange-alt"></i>
            Transactions
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/insights" class="sidenav-link">
            <i class="fas fa-chart-bar"></i>
            Insights
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/budgeting" class="sidenav-link">
            <i class="fas fa-bullseye"></i>
            Budgeting
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/profile" class="sidenav-link">
            <i class="fas fa-user"></i>
            Profile
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="budgeting-main">
      <div class="budgeting-header">
        <h2>Budget Management</h2>
      </div>

      <div class="budgeting-grid">
        <!-- Budget Set Section -->
        <div class="budget-set-card">
          <h3 class="budget-set-title">Set Budget Limits</h3>
          <form id="budget-form">
            <div class="budget-form-group">
              <label for="budget-category">Category</label>
              <select id="budget-category" required>
                <!-- Categories will be populated via JavaScript -->
              </select>
            </div>
            <div class="budget-form-group">
              <label for="budget-amount">Budget Amount</label>
              <div class="budget-input-container">
                <span class="currency-symbol">â‚¹</span>
                <input type="number" id="budget-amount" class="budget-input" min="0" step="0.01" placeholder="Enter budget amount" required>
              </div>
            </div>
            <button type="submit" id="set-budget-btn" class="set-budget-btn">Set Budget</button>
          </form>
        </div>

        <!-- Budget Overview Section -->
        <div class="budget-overview-card">
          <h3 class="budget-overview-title">Budget Overview</h3>
          <div class="budget-progress" id="budget-progress">
            <!-- Budget progress bars will be populated via JavaScript -->
          </div>
        </div>

        <!-- Empty Budgets State -->
        <div class="empty-budgets">
          <i class="fas fa-bullseye"></i>
          <h3>No Budgets Set</h3>
          <p>Start by setting a budget for a spending category to track your progress</p>
        </div>

        <!-- Budget Alerts Section -->
        <div class="budget-alerts-card">
          <h3 class="budget-alerts-title">Budget Status</h3>
          <ul class="alerts-list">
            <li class="alert-item warning">
              <div class="alert-info">
                <i class="alert-icon warning-icon fas fa-exclamation-circle"></i>
                <span class="alert-message">Food category is at 90% of budget</span>
              </div>
              <button class="alert-action view">View</button>
            </li>
            <li class="alert-item danger">
              <div class="alert-info">
                <i class="alert-icon danger-icon fas fa-exclamation-triangle"></i>
                <span class="alert-message">Entertainment category has exceeded budget by 15%</span>
              </div>
              <button class="alert-action view">View</button>
            </li>
          </ul>
        </div>
      </div>
    </main>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/utils.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/budgeting.js') }}"></script>
{% endblock %}
