{% extends 'layout.html' %}

{% block title %}Profile - FinMate{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
{% endblock %}

{% block content %}
<div class="profile-container">
  <!-- Header -->
  <header class="header">
    <div class="header-container">
      <div class="header-left">
        <button id="navbar-toggle" class="navbar-toggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="logo">
          <img src="{{ url_for('static', filename='assets/logo.svg') }}" alt="FinMate Logo">
          <span class="logo-text">FinMate</span>
        </div>
      </div>
      <div class="header-right">
        <div class="profile-dropdown">
          <button id="profile-toggle" class="profile-toggle">
            <i class="fas fa-user"></i>
          </button>
          <div class="profile-menu">
            <div class="profile-menu-header">
              <div class="profile-menu-name">User Name</div>
              <div class="profile-menu-email">user@example.com</div>
            </div>
            <ul class="profile-menu-items">
              <li class="profile-menu-item">
                <a href="/dashboard" class="profile-menu-link">
                  <i class="fas fa-tachometer-alt"></i>
                  Dashboard
                </a>
              </li>
              <li class="profile-menu-item">
                <a href="/profile" class="profile-menu-link">
                  <i class="fas fa-user"></i>
                  Profile
                </a>
              </li>
              <li class="profile-menu-divider"></li>
              <li class="profile-menu-item">
                <a href="#" class="profile-menu-link logout-btn">
                  <i class="fas fa-sign-out-alt"></i>
                  Logout
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="profile-content">
    <!-- Side Navigation -->
    <nav class="sidenav">
      <ul class="sidenav-menu">
        <li class="sidenav-item">
          <a href="/dashboard" class="sidenav-link">
            <i class="fas fa-tachometer-alt"></i>
            Dashboard
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/transactions" class="sidenav-link">
            <i class="fas fa-exchange-alt"></i>
            Transactions
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/insights" class="sidenav-link">
            <i class="fas fa-chart-bar"></i>
            Insights
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/budgeting" class="sidenav-link">
            <i class="fas fa-bullseye"></i>
            Budgeting
          </a>
        </li>
        <li class="sidenav-item">
          <a href="/profile" class="sidenav-link">
            <i class="fas fa-user"></i>
            Profile
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="profile-main">
      <div class="profile-header">
        <h2>Your Profile</h2>
      </div>

      <div class="profile-grid">
        <!-- Profile Information Card -->
        <div class="profile-card">
          <div class="profile-card-header">
            <h3 class="profile-card-title">Personal Information</h3>
            <p class="profile-card-subtitle">Manage your profile information</p>
          </div>
          <form id="profile-form">
            <div class="profile-form-group">
              <label for="profile-name">Full Name</label>
              <input type="text" id="profile-name" placeholder="Enter your name" required>
            </div>
            <div class="profile-form-group">
              <label for="profile-income">Monthly Income</label>
              <div class="income-input-container">
                <span class="currency-symbol">â‚¹</span>
                <input type="number" id="profile-income" class="income-input" min="0" placeholder="Enter your income" step="0.01">
              </div>
            </div>
            <div class="profile-form-group">
              <label for="income-type">Income Type</label>
              <select id="income-type">
                <option value="monthly">Monthly</option>
                <option value="one-time">One-time</option>
              </select>
            </div>
            <button type="submit" id="save-profile-btn" class="profile-save-btn">Save Changes</button>
          </form>
        </div>

        <!-- Analytics Section -->
        <div class="profile-analytics">
          <h3 class="analytics-title">Financial Analytics</h3>
          <div class="analytics-grid">
            <div class="analytics-card">
              <h4 class="analytics-label">Month-on-Month Change</h4>
              <div class="analytics-value" id="month-change-value">0%</div>
            </div>
            <div class="analytics-card">
              <h4 class="analytics-label">Savings Trend</h4>
              <div class="analytics-value" id="savings-trend-value">0%</div>
            </div>
          </div>
        </div>

        <!-- Top Spending Categories -->
        <div class="top-categories">
          <h3 class="top-categories-title">Top Spending Categories</h3>
          <ul class="category-list" id="top-categories-list">
            <!-- Categories will be populated via JavaScript -->
          </ul>
        </div>

        <!-- Budget Alerts -->
        <div class="budget-alerts">
          <h3 class="budget-alerts-title">Budget Breach Alerts</h3>
          <ul class="alerts-list" id="budget-alerts-list">
            <!-- Alerts will be populated via JavaScript -->
          </ul>
        </div>
      </div>
    </main>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/utils.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}
